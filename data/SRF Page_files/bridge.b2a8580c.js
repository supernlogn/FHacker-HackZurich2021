(self.webpackChunksrf_cms=self.webpackChunksrf_cms||[]).push([[4609],{26041:(e,t,n)=>{"use strict";n.d(t,{O:()=>E});var a={autoplayEnabled:!1,debugModeEnabled:!1},i={init:function(){!function(e){if(o())return void e();var t=!1,n=500,a=30;try{var i=window.setInterval((function(){a--,o()&&!t?(window.clearInterval(i),t=!0,e()):0===a&&window.clearInterval(i)}),n)}catch(e){}}((function(){var e;p(),_(),null!=(e=window.nativebridge)&&e.isAutoplayEnabled&&(l(),window.setInterval(l,5e3)),d()}))},isReady:o,isRunningInLegacyApp:r,sendEvent:function(e){var t,n;switch(e.eventType){case"PageMetaData":null==(t=window.nativebridge)||t.onMetadataRetrieved(JSON.stringify(e.payload));break;case"TrackingEvent":null==(n=window.nativebridge)||n.trackEvent(JSON.stringify(e.payload));break;case"PlayMedia":case"OpenArticle":case"OpenLandingPage":case"OpenLink":window.open(e.payload.url)}},isAutoplayEnabled:function(){var e;return null!=(e=window.legacyAutoplayEnabled)&&e}};function r(){return void 0!==window.nativebridge}function o(){return r()&&!0===window.legacyAppReady}function l(){var e,t=null==(e=window.nativebridge)||null==e.isAutoplayEnabled?void 0:e.isAutoplayEnabled();null==t||t.then((function(e){return window.legacyAutoplayEnabled=e}))}function d(){window.legacyDeviceInfo?f({eventType:"DeviceInfo",payload:{deviceId:window.legacyDeviceInfo.ceid,siteName:window.legacyDeviceInfo.navigation_app_site_name}}):setTimeout(d,100)}function s(e,t){a.debugModeEnabled&&console.log("[SRFBridge] "+e+" "+function(e){if(e)try{return JSON.stringify(e)}catch(e){}return""}(t))}var u=[];function c(e){a.nativePort?function(e){try{var t;s("Sending",e),null==(t=a.nativePort)||t.postMessage(JSON.stringify(e))}catch(e){s("Failed to send",e)}}(e):i.isReady()?i.sendEvent(e):u.push(e)}function p(){u.forEach((function(e){return c(e)})),u=[]}function v(e){var t,n,i,r,o,l=function(e){try{var t;return null!=(t=JSON.parse(e))?t:{}}catch(e){return{}}}(e.data);if(l.eventType){switch(s("Received",l),l.eventType){case"Initialize":a.autoplayEnabled=null!=(t=l.payload.autoplay)&&t,a.nativePort=(null==(n=e.ports)?void 0:n[0])||(null==(i=window.webkit)||null==(r=i.messageHandlers)?void 0:r.nativePort),a.debugModeEnabled=a.debugModeEnabled||l.payload.debugMode||!1,l.payload.deviceId&&f({eventType:"DeviceInfo",payload:{deviceId:l.payload.deviceId}}),p(),_();break;case"SetAutoplay":a.autoplayEnabled=null!=(o=l.payload.autoplay)&&o}f(l)}}var g=!1;var y={};function f(e){var t;(null!=(t=y[e.eventType])?t:[]).forEach((function(t){return t(e)}))}var A=[];function _(){(a.nativePort||i.isReady())&&(A.forEach((function(e){try{e()}catch(e){}})),A=[])}var E={init:function(e,t){void 0===t&&(t=!1),a.debugModeEnabled=t,s("Initializing"),g||(window.addEventListener("message",v),g=!0),function(){var e;if(null!=(e=window.SRFApp)&&e.init)window.SRFApp.init();else if(window.SRFApp){var t,n,a;null==(t=window.webkit)||null==(n=t.messageHandlers)||null==(a=n.nativePort)||a.postMessage(JSON.stringify({eventType:"Ready",payload:{}}))}i.init()}(),c({eventType:"PageMetaData",payload:e})},addListener:function(e,t){return function(e,t){y[e]||(y[e]=[]),y[e].push(t)}(e,t)},isRunningInApp:function(){return!(!window.SRFApp&&!i.isRunningInLegacyApp())},isAutoplayEnabled:function(){return a.autoplayEnabled||i.isAutoplayEnabled()},playMedia:function(e,t,n){return void 0===n&&(n=0),c({eventType:"PlayMedia",payload:{urn:e,url:t,startTime:n}})},openArticle:function(e,t,n){return c({eventType:"OpenArticle",payload:{urn:e,url:t,title:n}})},openLandingPage:function(e,t,n){return c({eventType:"OpenLandingPage",payload:{urn:e,url:t,title:n}})},openLink:function(e,t){return c({eventType:"OpenLink",payload:{url:e,title:t}})},trackEvent:function(e){return c({eventType:"TrackingEvent",payload:e})},sendEvent:function(e){return c(e)},onAppConnected:function(e){return function(e){A.push(e),_()}(e)}}},22229:(e,t,n)=>{"use strict";var a=n(26041),i=n(995),r=n(60896),o=n(52709),l=window.SRF_BRIDGE_DATA.webtrekk,d=(0,r.i)();if(l){var s=i.Z.getItemJsonParsed("srf:analytics:mod:app");l.srg_mod1=u(s,"mod1"),l.srg_mod2=u(s,"mod2"),l.srg_mod3=u(s,"mod3"),l.srg_mod4=u(s,"mod4"),i.Z.removeItem("srf:analytics:mod:app"),Object.keys(l).forEach((function(e){"undefined"===l[e]&&delete l[e]}))}function u(e,t){var n="undefined";return e&&(e.hasOwnProperty("srg_"+t)?n=e["srg_"+t]:e.hasOwnProperty("srf_"+t)&&(n=e["srf_"+t]),e.hasOwnProperty("srg_override_"+t)&&(n=e["srg_override_"+t])),decodeURIComponent(decodeURIComponent(n)).replace("+"," ")}a.O.init({title:l.content_title_pretty,weburl:window.SRF_BRIDGE_DATA.weburl,shortLead:window.SRF_BRIDGE_DATA.shortLead,type:l.content_page_type,webtrekk:l}),a.O.addListener("DeviceInfo",(e=>{try{i.Z.setItemJsonStringified("sg_app_data",{ceid:e.payload.deviceId,navigation_app_site_name:e.payload.siteName});var t=new CustomEvent("setDeviceInfo",{});document.dispatchEvent(t)}catch(e){}})),a.O.isRunningInApp()&&d.CLICKJACKING_ENABLED&&o(document).on("click","a",(e=>{var t,n=e.currentTarget.href;if(""!==n&&(!e.currentTarget.hasAttribute("href")||0!==e.currentTarget.getAttribute("href").indexOf("#"))){e.preventDefault();var i=e.currentTarget.dataset.urn,r=null!==(t=e.currentTarget.dataset.title)&&void 0!==t?t:"";null!=i&&i.includes(":article:")?a.O.openArticle(i,n,r):null!=i&&i.includes(":landingpage:")?a.O.openLandingPage(i,n,r):a.O.openLink(n,r)}}))},60896:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var a=n(52709),i=null;function r(){if(null==i){var e=a("#config__js");e.length&&((i={}).CONTENT_CLASS=a('meta[name="srf.content_class"]').prop("content")||"",i.BUSINESS_UNIT=e.data("business_unit")||"",i.ENVIRONMENT=e.data("environment")||"",i.REPRESENTATION=e.data("representation")||"",i.SEO_URL=e.data("seo-url")||"",i.SPA_PLAYER_JS=e.data("spa_player_js")||"",i.LETTERBOX_PLAYER_IL_HOST=e.data("letterbox_player_il_host")||"",i.ARTICLE_FEATURES=e.data("articleFeatures")||"",i.ANALYTICS_ENABLED=e.data("analytics-enabled")||"",i.ANALYTICS_WEBTREKK_VALUE_OBJECT=e.data("analytics-webtrekk-value-object")||null,i.ANALYTICS_WEBTREKK_CUSTOM_DATA=e.data("analytics-webtrekk-custom-data")||null,i.ANALYTICS_WEBTREKK_SURVEY_GIZMO_VALUE_OBJECT=e.data("analytics-webtrekk-survey-gizmo-value-object")||null,i.ANALYTICS_SURVEY_GIZMO_ENABLED=e.data("survey-gizmo-enabled")||!1,i.ANALYTICS_SURVEY_GIZMO_BEACON=e.data("analytics-survey-gizmo-beacon")||"",i.ANALYTICS_ABTASTY_ENABLED=e.data("ab-tasty-enabled")||!1,i.WEBPUSH_STYLE_PROMPT_ENABLED=e.data("webpush-style-prompt-enabled")||!1,i.ANALYTICS_SWISS_MEDIA_DATA_HUB=e.data("swiss-media-data-hub")||"",i.LOKALPROGNOSE_LP_URL=e.data("meteo-lokalprognose-url")||"",i.WEBPUSH_TAGS=e.data("webpush-tags")||null,i.ANALYTICS_UDP_API=e.data("udp")||null,i.CLICKJACKING_ENABLED=e.data("clickjacking")||!1)}return i}},995:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});class a{static getItem(e,t){if(!this.isLocalStorageAvailable()&&t)return t;var n=localStorage.getItem(e);return!n&&t?t:n}static getItemJsonParsed(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.hasItem(e))return t;try{return JSON.parse(this.getItem(e,JSON.stringify(t)))}catch(e){return t}}static setItemJsonStringified(e,t){this.setItem(e,JSON.stringify(t))}static setItem(e,t){return!!this.isLocalStorageAvailable()&&(localStorage.setItem(e,t),!0)}static hasItem(e){return!!this.isLocalStorageAvailable()&&!!localStorage.getItem(e)}static removeItem(e){return!(!this.isLocalStorageAvailable()||!this.hasItem(e))&&(localStorage.removeItem(e),!0)}static prependIdToList(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;this.removeIdFromList(e,t);var a=this.getItemJsonParsed(e,[]);"string"==typeof t&&(Array.isArray(a)||(a=[]),a.unshift(t),a.length>n&&a.reverse().slice(a.length-n).reverse(),this.setItemJsonStringified(e,a))}static removeIdFromList(e,t){if("string"==typeof t){var n=this.getItemJsonParsed(e,[]);Array.isArray(n)||(n=[]);var a=n.filter((e=>e!==t));this.setItemJsonStringified(e,a)}}static isLocalStorageAvailable(){var e="fefLocalStorage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}}}},e=>{"use strict";e.O(0,[2709],(()=>{return t=22229,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=bridge.b2a8580c.js.map